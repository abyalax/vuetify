echo "Running build before push..."

pnpm build-only
status=$?

if [ $status -ne 0 ]; then
  echo ""
  echo "❌ Build failed. Push aborted."
  echo ""
  echo "Suggested actions:"
  echo "  - Fix the build error"
  echo "  - Amend the last commit if needed:"
  echo "      git reset --soft HEAD~1"
  echo "      git add ."
  echo "      git commit --amend"
  echo ""
  exit 1
fi

echo "✅ Build succeeded. Proceeding with push."
